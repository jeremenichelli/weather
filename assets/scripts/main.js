!function(e){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),i=o.length>>>0;if(0===i)return-1;var a=+t||0;if(1/0===Math.abs(a)&&(a=0),a>=i)return-1;for(n=Math.max(a>=0?a:i-Math.abs(a),0);i>n;){if(n in o&&o[n]===e)return n;n++}return-1});var t="undefined"!=typeof HTMLElement?HTMLElement:Element,n=function(e){return e.className.split(/\s+/)},o=function(e,t){return-1!==n(e).indexOf(t)},i=function(e,t){o(e,t)||(e.className+=""===e.className?t:" "+t)},a=function(e,t){if(o(e,t)){var i=n(e);i.splice(i.indexOf(t),1),e.className=i.join(" ")}},r=function(e,t){o(e,t)?a(e,t):i(e,t)};e.documentElement.classList?(t.prototype.hasClass=function(e){return this.classList.contains(e)},t.prototype.addClass=function(e){this.classList.add(e)},t.prototype.removeClass=function(e){this.classList.remove(e)},t.prototype.toggleClass=function(e){this.classList.toggle(e)}):(t.prototype.hasClass=function(e){return o(this,e)},t.prototype.addClass=function(e){i(this,e)},t.prototype.removeClass=function(e){a(this,e)},t.prototype.toggleClass=function(e){r(this,e)})}(document),function(e,t){"use strict";"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof exports?module.exports=t:e.jabiru=t(e)}(this,function(){"use strict";var e,t,n,o=!1,i=document.head||document.getElementsByTagName("head")[0]||document.body,a=function(a,r){function s(e){u[d]=e=null,c.parentNode.removeChild(c)}var c=document.createElement("script"),d=e+t,u=o?window:window.jabiru,l=o?"":"jabiru.";t++,u[d]=function(e){"function"==typeof r?r(e):console.error("You must specify a method as a callback")},c.onload=c.onreadystatechange=function(e){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(c&&(c.onreadystatechange=null),s(e))},c.src=a+n+"="+l+d,i.appendChild(c)},r=function(n){"string"==typeof n?(e=n,t=0):console.error("Callback name must be a string")},s=function(e){"string"==typeof e?n=e:console.error("Query name must be a string")},c=function(){o=!0};return r("callback"),s("?callback"),{get:a,name:r,query:s,toGlobal:c}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof exports?module.exports=t:e.Condense=t(e)}(this,function(){"use strict";jabiru.toGlobal(),jabiru.name("condense_callback"),jabiru.query("&callback");var e=["en","ru","it","es","sp","uk","ua","de","pt","ro","pl","fi","nl","fr","bg","sv","se","zh_tw","zh","zh_cn","tr","ca"],t=["N","NE","E","SE","S","SW","W","NW"],n=["metric","imperial"],o="http://api.openweathermap.org/data/2.5/weather?",i="assets/img/",a=".png",r=function(){this.rawData=null,this.isSet=!1,this.hasMessageBox=!1};r.prototype={set:function(e,t,n){var o=this;return o.isSet?void console.error("The widget is already set"):e?(o.messageBox=e.querySelector("[data-condense-message]"),o.messageBox&&(o.hasMessageBox=!0),o.element=e,o.onload=t,o.onerror=n,o.get(),void 0):void console.error("You must specify an HTML Element to build the widget")},get:function(){var e,t,n,i=this,a=i.element,r=a.getAttribute("data-condense-location"),u=a.getAttribute("data-condense-latitude"),l=a.getAttribute("data-condense-longitude"),f=a.getAttribute("data-condense-language"),m=a.getAttribute("data-condense-units");u&&l&&(r={lat:u,lon:l}),i.showMessage("Setting data and location"),e=s(r),t=c(f),n=d(m),r?(i.url=o+e+t+n,i.request()):"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(e){i.url=o+"&lat="+e.coords.latitude+"&lon="+e.coords.longitude+t+n,i.request()},function(){"function"==typeof i.onerror&&i.onerror()},{maximumAge:6e5,timeout:1e4,enableHighAccuracy:!0})},request:function(){var e=this,t=encodeURI(e.url);e.showMessage("Looking for the weather"),jabiru.get(t,function(t){e.isSet=!0,e.rawData=t,e.insertData()})},insertData:function(){var e=this,t=e.rawData,n=e.element,o=e.onload;if(t=l(t,e)){for(var i in t.data){var a="[data-condense-"+i+"]",r=n.querySelector(a);r&&(r.innerHTML=t.data[i])}var s=n.querySelector("[data-condense-icon]");o&&(s?s.onload=o:o()),s&&(s.src=t.imageSrc)}e.rawData=null},showMessage:function(e){this.hasMessageBox&&"string"==typeof e&&(this.messageBox.innerHTML=e)}};var s=function(e){return e&&"object"==typeof e?"&lat="+e.lat+"&lon="+e.lon:e?"&q="+e:void 0},c=function(t){return t&&-1!==e.indexOf(t)?"&lang="+t:"&lang=en"},d=function(e){return e&&-1!==n.indexOf(e)?"&units="+e:""},u=function(e){var n=Math.round(e/45);return t[n]||"N"},l=function(e,t){return 200===e.cod?{data:{temperature:Math.round(e.main.temp),min:Math.round(e.main.temp_min),max:Math.round(e.main.temp_max),pressure:e.main.pressure,humidity:e.main.humidity,city:e.name,country:e.sys.country,description:e.weather[0].description,code:e.weather[0].id,windSpeed:e.wind.speed,windDirection:u(e.wind.deg)},imageSrc:i+e.weather[0].icon+a}:void("function"==typeof t.onerror&&t.onerror())};return r}),function(e,t){"use strict";function n(){if(a.widgetBox.innerHTML="",r.close(),""===u.value)return void r.show("Please insert a city name",!0);r.show("Loading...");var e=s.cloneNode(!0),t=new Condense;e.id="city-widget",e.setAttribute("data-condense-location",u.value),a.widgetBox.appendChild(e),t.set(e,function(){r.close(),a.widgetBox.appendChild(e),e.removeClass("hidden")},function(){r.show("Location not found",!0)})}function o(){a.widgetBox.innerHTML="",r.show("Loading..."),u.value="";var e=s.cloneNode(!0),t=new Condense;e.id="location-widget",a.widgetBox.appendChild(e),t.set(e,function(){r.close(),a.widgetBox.appendChild(e),e.removeClass("hidden")},function(){r.show("Location not found",!0)})}var i=t.body;e.onload=function(){i.addClass("loaded")};var a={controlBox:t.getElementById("control-box"),widgetBox:t.getElementById("widget-box"),messageBox:t.getElementById("message-box")},r={show:function(e,t){a.messageBox.removeClass("error"),t&&a.messageBox.addClass("error"),a.messageBox.innerHTML=e},close:function(){a.messageBox.innerHTML=""}},s=t.getElementById("sample-widget"),c=t.getElementById("share-location-button"),d=t.getElementById("city-location-button"),u=t.getElementById("location-input");d.addEventListener("click",function(e){e.preventDefault(),n()},!1),c.addEventListener("click",function(e){e.preventDefault(),o()},!1),e.onkeydown=function(e){13===e.keyCode&&n()}}(window,document);