!function(e){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),a=o.length>>>0;if(0===a)return-1;var i=+t||0;if(1/0===Math.abs(i)&&(i=0),i>=a)return-1;for(n=Math.max(i>=0?i:a-Math.abs(i),0);a>n;){if(n in o&&o[n]===e)return n;n++}return-1});var t="undefined"!=typeof HTMLElement?HTMLElement:Element,n=function(e){return e.className.split(/\s+/)},o=function(e,t){return-1!==n(e).indexOf(t)},a=function(e,t){o(e,t)||(e.className+=""===e.className?t:" "+t)},i=function(e,t){if(o(e,t)){var a=n(e);a.splice(a.indexOf(t),1),e.className=a.join(" ")}},r=function(e,t){o(e,t)?i(e,t):a(e,t)};e.documentElement.classList?(t.prototype.hasClass=function(e){return this.classList.contains(e)},t.prototype.addClass=function(e){this.classList.add(e)},t.prototype.removeClass=function(e){this.classList.remove(e)},t.prototype.toggleClass=function(e){this.classList.toggle(e)}):(t.prototype.hasClass=function(e){return o(this,e)},t.prototype.addClass=function(e){a(this,e)},t.prototype.removeClass=function(e){i(this,e)},t.prototype.toggleClass=function(e){r(this,e)})}(document),function(e,t){"use strict";"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof exports?module.exports=t:e.jabiru=t(e)}(this,function(){"use strict";var e,t,n,o=!1,a=document.head||document.getElementsByTagName("head")[0]||document.body,i=function(i,r){function s(e){u[c]=e=null,d.parentNode.removeChild(d)}var d=document.createElement("script"),c=e+t,u=o?window:window.jabiru,l=o?"":"jabiru.";t++,u[c]=function(e){"function"==typeof r?r(e):console.error("You must specify a method as a callback")},d.onload=d.onreadystatechange=function(e){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(d&&(d.onreadystatechange=null),s(e))},d.src=i+n+"="+l+c,a.appendChild(d)},r=function(n){"string"==typeof n?(e=n,t=0):console.error("Callback name must be a string")},s=function(e){"string"==typeof e?n=e:console.error("Query name must be a string")},d=function(){o=!0};return r("callback"),s("?callback"),{get:i,name:r,query:s,toGlobal:d}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof exports?module.exports=t:e.Condense=t(e)}(this,function(){"use strict";jabiru.toGlobal(),jabiru.name("condense_callback"),jabiru.query("&callback");var e=["en","ru","it","es","sp","uk","ua","de","pt","ro","pl","fi","nl","fr","bg","sv","se","zh_tw","zh","zh_cn","tr","ca"],t=["N","NE","E","SE","S","SW","W","NW"],n=["metric","imperial"],o="http://api.openweathermap.org/data/2.5/weather?",a="assets/img/",i=".png",r=function(){this.rawData=null,this.isSet=!1,this.hasMessageBox=!1};r.prototype={set:function(e,t,n){var o=this;return o.isSet?void console.error("The widget is already set"):e?(o.messageBox=e.querySelector("[data-condense-message]"),o.messageBox&&(o.hasMessageBox=!0),o.element=e,o.onload=t,o.onerror=n,o.get(),void 0):void console.error("You must specify an HTML Element to build the widget")},get:function(){var e,t,n,a=this,i=a.element,r=i.getAttribute("data-condense-location"),u=i.getAttribute("data-condense-latitude"),l=i.getAttribute("data-condense-longitude"),f=i.getAttribute("data-condense-language"),m=i.getAttribute("data-condense-units");u&&l&&(r={lat:u,lon:l}),a.showMessage("Setting data and location"),e=s(r),t=d(f),n=c(m),r?(a.url=o+e+t+n,a.request()):"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(e){a.url=o+"&lat="+e.coords.latitude+"&lon="+e.coords.longitude+t+n,a.request()})},request:function(){var e=this,t=encodeURI(e.url);e.showMessage("Looking for the weather"),jabiru.get(t,function(t){e.isSet=!0,e.rawData=t,e.insertData()})},insertData:function(){var e=this,t=e.rawData,n=e.element,o=e.onload;t=l(t,e);for(var a in t.data){var i="[data-condense-"+a+"]",r=n.querySelector(i);r&&(r.innerHTML=t.data[a])}var s=n.querySelector("[data-condense-icon]");o&&(s?s.onload=o:o()),s&&(s.src=t.imageSrc),e.rawData=null},showMessage:function(e){this.hasMessageBox&&"string"==typeof e&&(this.messageBox.innerHTML=e)}};var s=function(e){return e&&"object"==typeof e?"&lat="+e.lat+"&lon="+e.lon:e?"&q="+e:void 0},d=function(t){return t&&-1!==e.indexOf(t)?"&lang="+t:"&lang=en"},c=function(e){return e&&-1!==n.indexOf(e)?"&units="+e:""},u=function(e){var n=Math.round(e/45);return t[n]||"N"},l=function(e,t){return 200===e.cod?{data:{temperature:Math.round(e.main.temp),min:Math.round(e.main.temp_min),max:Math.round(e.main.temp_max),pressure:e.main.pressure,humidity:e.main.humidity,city:e.name,country:e.sys.country,description:e.weather[0].description,code:e.weather[0].id,windSpeed:e.wind.speed,windDirection:u(e.wind.deg)},imageSrc:a+e.weather[0].icon+i}:void t.onerror()};return r}),function(e,t){"use strict";function n(){if(i.widgetBox.innerHTML="",r.close(),""===u.value)return void r.show("Please insert a city name",!0);r.show("Loading...");var e=s.cloneNode(!0),t=new Condense;e.id="city-widget",e.setAttribute("data-condense-location",u.value),i.widgetBox.appendChild(e),t.set(e,function(){r.close(),i.widgetBox.appendChild(e),e.removeClass("hidden")},function(){r.show("Location not found",!0)})}function o(){i.widgetBox.innerHTML="",r.show("Loading..."),u.value="";var e=s.cloneNode(!0),t=new Condense;e.id="location-widget",i.widgetBox.appendChild(e),t.set(e,function(){r.close(),i.widgetBox.appendChild(e),e.removeClass("hidden")},function(){r.show("Location not found",!0)})}var a=t.body;e.onload=function(){a.addClass("loaded")};var i={controlBox:t.getElementById("control-box"),widgetBox:t.getElementById("widget-box"),messageBox:t.getElementById("message-box")},r={show:function(e,t){i.messageBox.removeClass("error"),t&&i.messageBox.addClass("error"),i.messageBox.innerHTML=e},close:function(){i.messageBox.innerHTML=""}},s=t.getElementById("sample-widget"),d=t.getElementById("share-location-button"),c=t.getElementById("city-location-button"),u=t.getElementById("location-input");c.addEventListener("click",function(e){e.preventDefault(),n()},!1),d.addEventListener("click",function(e){e.preventDefault(),o()},!1)}(window,document);