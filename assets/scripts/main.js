!function(e){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),i=o.length>>>0;if(0===i)return-1;var a=+t||0;if(1/0===Math.abs(a)&&(a=0),a>=i)return-1;for(n=Math.max(a>=0?a:i-Math.abs(a),0);i>n;){if(n in o&&o[n]===e)return n;n++}return-1});var t="undefined"!=typeof HTMLElement?HTMLElement:Element,n=function(e){return e.className.split(/\s+/)},o=function(e,t){return-1!==n(e).indexOf(t)},i=function(e,t){o(e,t)||(e.className+=""===e.className?t:" "+t)},a=function(e,t){if(o(e,t)){var i=n(e);i.splice(i.indexOf(t),1),e.className=i.join(" ")}},r=function(e,t){o(e,t)?a(e,t):i(e,t)};e.documentElement.classList?(t.prototype.hasClass=function(e){return this.classList.contains(e)},t.prototype.addClass=function(e){this.classList.add(e)},t.prototype.removeClass=function(e){this.classList.remove(e)},t.prototype.toggleClass=function(e){this.classList.toggle(e)}):(t.prototype.hasClass=function(e){return o(this,e)},t.prototype.addClass=function(e){i(this,e)},t.prototype.removeClass=function(e){a(this,e)},t.prototype.toggleClass=function(e){r(this,e)})}(document),function(e,t){"use strict";"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof exports?module.exports=t:e.jabiru=t(e)}(this,function(){"use strict";var e,t,n,o=!1,i=document.head||document.getElementsByTagName("head")[0]||document.body,a=function(a,r){function s(e){d[c]=e=null,u.parentNode.removeChild(u)}var u=document.createElement("script"),c=e+t,d=o?window:window.jabiru,l=o?"":"jabiru.";t++,d[c]=function(e){"function"==typeof r?r(e):console.error("You must specify a method as a callback")},u.onload=u.onreadystatechange=function(e){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(u&&(u.onreadystatechange=null),s(e))},u.src=a+n+"="+l+c,i.appendChild(u)},r=function(n){"string"==typeof n?(e=n,t=0):console.error("Callback name must be a string")},s=function(e){"string"==typeof e?n=e:console.error("Query name must be a string")},u=function(){o=!0};return r("callback"),s("?callback"),{get:a,name:r,query:s,toGlobal:u}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof exports?module.exports=t:e.Condense=t(e)}(this,function(){"use strict";jabiru.toGlobal(),jabiru.name("condense_callback"),jabiru.query("&callback");var e=["en","ru","it","es","sp","uk","ua","de","pt","ro","pl","fi","nl","fr","bg","sv","se","zh_tw","zh","zh_cn","tr","ca"],t=["N","NE","E","SE","S","SW","W","NW"],n=["metric","imperial"],o="http://api.openweathermap.org/data/2.5/weather?",i="assets/img/",a=".png",r=function(){this.rawData=null,this.isSet=!1,this.hasMessageBox=!1};r.prototype={set:function(e,t,n){var o=this;return o.isSet?void console.error("The widget is already set"):e?(o.messageBox=e.querySelector("[data-condense-message]"),o.messageBox&&(o.hasMessageBox=!0),o.element=e,o.onload=t,o.onerror=n,o.get(),void 0):void console.error("You must specify an HTML Element to build the widget")},get:function(){var e,t,n,i=this,a=i.element,r=a.getAttribute("data-condense-location"),d=a.getAttribute("data-condense-latitude"),l=a.getAttribute("data-condense-longitude"),f=a.getAttribute("data-condense-language"),m=a.getAttribute("data-condense-units");d&&l&&(r={lat:d,lon:l}),i.showMessage("Setting data and location"),e=s(r),t=u(f),n=c(m),r?(i.url=o+e+t+n,i.request()):"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(e){i.url=o+"&lat="+e.coords.latitude+"&lon="+e.coords.longitude+t+n,i.request()},function(){"function"==typeof i.onerror&&i.onerror()},{maximumAge:6e5,timeout:1e5,enableHighAccuracy:!1})},request:function(){var e=this,t=encodeURI(e.url);e.showMessage("Looking for the weather"),jabiru.get(t,function(t){e.isSet=!0,e.rawData=t,e.insertData()})},insertData:function(){var e=this,t=e.rawData,n=e.element,o=e.onload;if(t=l(t,e)){for(var i in t.data){var a="[data-condense-"+i+"]",r=n.querySelector(a);r&&(r.innerHTML=t.data[i])}var s=n.querySelector("[data-condense-icon]");o&&(s?s.onload=o:o()),s&&(s.src=t.imageSrc)}e.rawData=null},showMessage:function(e){this.hasMessageBox&&"string"==typeof e&&(this.messageBox.innerHTML=e)}};var s=function(e){return e&&"object"==typeof e?"&lat="+e.lat+"&lon="+e.lon:e?"&q="+e:void 0},u=function(t){return t&&-1!==e.indexOf(t)?"&lang="+t:"&lang=en"},c=function(e){return e&&-1!==n.indexOf(e)?"&units="+e:""},d=function(e){var n=Math.round(e/45);return t[n]||"N"},l=function(e,t){return 200===e.cod?{data:{temperature:Math.round(e.main.temp),min:Math.round(e.main.temp_min),max:Math.round(e.main.temp_max),pressure:e.main.pressure,humidity:e.main.humidity,city:e.name,country:e.sys.country,description:e.weather[0].description,code:e.weather[0].id,windSpeed:e.wind.speed,windDirection:d(e.wind.deg)},imageSrc:i+e.weather[0].icon+a}:void("function"==typeof t.onerror&&t.onerror())};return r}),function(e,t){"use strict";function n(){c.removeAttribute("disabled"),d.removeAttribute("disabled"),l.removeAttribute("disabled")}function o(){c.setAttribute("disabled",""),d.setAttribute("disabled",""),l.setAttribute("disabled","")}function i(e){var t=u.cloneNode(!0),i=new Condense;if(r.widgetBox.innerHTML="",s.close(),"byInput"===e){if(""===l.value)return void s.show("Please insert a city name",!0);t.setAttribute("data-condense-location",l.value),t.id="city-widget",i.set(t,function(e){s.close(),r.widgetBox.appendChild(t),t.removeClass("hidden"),n(),console.log(e)},function(){s.show("Location not found",!0),n()})}"byGeolocation"===e&&(l.value="",t.id="location-widget",i.set(t,function(e){s.close(),r.widgetBox.appendChild(t),t.removeClass("hidden"),n(),console.log(e)},function(){s.show("Location not found",!0),n()})),s.show("Loading..."),o()}var a=t.body;e.onload=function(){a.addClass("loaded"),n()};var r={controlBox:t.getElementById("control-box"),widgetBox:t.getElementById("widget-box"),messageBox:t.getElementById("message-box")},s={show:function(e,t){r.messageBox.removeClass("error"),t&&r.messageBox.addClass("error"),r.messageBox.innerHTML=e},close:function(){r.messageBox.innerHTML=""}},u=t.getElementById("sample-widget"),c=t.getElementById("share-location-button"),d=t.getElementById("city-location-button"),l=t.getElementById("location-input");d.addEventListener("click",function(e){e.preventDefault(),i("byInput")},!1),c.addEventListener("click",function(e){e.preventDefault(),i("byGeolocation")},!1),e.onkeydown=function(e){13===e.keyCode&&i("byInput")}}(window,document);